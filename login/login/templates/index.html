<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn4.vectorstock.com/i/1000x1000/72/73/red-letter-a-logo-vector-18697273.jpg">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="logo-container">
            <img class="logo-image" src="https://1000logos.net/wp-content/uploads/2021/05/Asko-logo.png" alt="BY STORES">
        </div>
        <div class="nav-items-container">
            <div class="nav-item">
                <a class="cart-link" href="/cart">Cart</a>
            </div>
            <div class="nav-item">
                <a href="/orderdetails" class="order-details-link">Order Details</a>
            </div>
            <form action="/displayProducts" method="get" class="filter-form" name="age_category" id="all_option">
                <select name="age_category" id="age_category">
                    <option value="All">All</option>
                    <option value="below_10">Below 10</option>
                    <option value="10_to_20">10 to 20</option>
                    <option value="above_20">Above 20</option>
                </select>
                <button type="submit" class="filter-button">Filter</button>
            </form>
            
            <div class="search-container">
                <form action="{{ url_for('products_api.search') }}" method="get" class="form">
                    <input class="search_bar" type="text" name="query" placeholder="Search for Asko products">
                    <button type="submit">Search</button>
                </form>  
            </div>
            <div class="logout-container">
                <a href="/login" ><button type="button" class="btn btn-outline-primary">Logout</button></a>
            </div>
        </div>
    </nav>

    <h1 class="title-heading">Product Listing</h1>

    <div class="product-list">
        {% if products %}
        {% for product in products %}
            <div class="product" onclick="window.location.href='/product/{{ product[1] }}';" style="cursor: pointer;">
                <div class="product-details">
                    <h2 class="product-heading">{{ product[1] }}</h2>
                    <p class="price">Price: ${{ product[2] }}</p>
                    <form class="form" action="/add_to_cart/{{ product[1] }}" method="post">
                        <button type="submit" class="button">Add Cart</button>
                    </form>
                </div>
                <div class="side-image">
                    <img class="" src="{{ product[4] }}" alt="{{ product[4] }}">
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="empty-para">No products available.</p>
    {% endif %}
    
    </div>

    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <li class="page-item {% if page == 1 %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for('products_api.index', page=page-1) }}">Previous</a>
            </li>
            {% for num in range(1, total_pages + 1) %}
                <li class="page-item {% if page == num %}active{% endif %}">
                    <a class="page-link" href="{{ url_for('products_api.index', page=num) }}">{{ num }}</a>
                </li>
            {% endfor %}
            <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for('products_api.index', page=page+1) }}">Next</a>
            </li>
        </ul>
    </nav>
</body>
</html>
